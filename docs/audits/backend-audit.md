# –ê—É–¥–∏—Ç –±–µ–∫–µ–Ω–¥ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã 3D Print Pro

**–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞:** 2024-11-17  
**–í–µ—Ä—Å–∏—è –±–µ–∫–µ–Ω–¥–∞:** Simple PHP Backend (Zero Dependencies)  
**–ê—É–¥–∏—Ç–æ—Ä:** Backend Architecture Review

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è](#–æ–±—â–∞—è-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)
2. [–ö–∞—Ä—Ç–∞ API –º–∞—Ä—à—Ä—É—Ç–æ–≤](#–∫–∞—Ä—Ç–∞-api-–º–∞—Ä—à—Ä—É—Ç–æ–≤)
3. [–ê–Ω–∞–ª–∏–∑ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤](#–∞–Ω–∞–ª–∏–∑-–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö-–∫–ª–∞—Å—Å–æ–≤)
4. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
5. [–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å](#–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
6. [–ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–∏—Å–∫–∏](#–ø—Ä–æ–±–ª–µ–º—ã-–∏-—Ä–∏—Å–∫–∏)
7. [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏](#—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)
8. [–ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π](#–ø–ª–∞–Ω-–¥–µ–π—Å—Ç–≤–∏–π)

---

## –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–¢–∏–ø:** Simple PHP Backend (Zero Dependencies)  
**–†–æ—É—Ç–µ—Ä:** Single-file router (`backend/public/index.php`)  
**–ë–î:** MySQL (PDO) —á–µ—Ä–µ–∑ Singleton Database –∫–ª–∞—Å—Å  
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** Custom JWT (HS256)  
**CORS:** –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `.env`

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
backend/
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îú‚îÄ‚îÄ index.php          # –ì–ª–∞–≤–Ω—ã–π —Ä–æ—É—Ç–µ—Ä (126 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îî‚îÄ‚îÄ .htaccess          # Apache –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ api/                   # 14 endpoint —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ auth/ (3 —Ñ–∞–π–ª–∞)
‚îÇ   ‚îî‚îÄ‚îÄ 10 standalone endpoints
‚îú‚îÄ‚îÄ helpers/               # 4 helper –∫–ª–∞—Å—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ Database.php       # PDO wrapper (72 —Å—Ç—Ä–æ–∫–∏)
‚îÇ   ‚îú‚îÄ‚îÄ Response.php       # JSON response (56 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ JWT.php            # JWT implementation (65 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îî‚îÄ‚îÄ Auth.php           # Authentication (97 —Å—Ç—Ä–æ–∫)
‚îî‚îÄ‚îÄ database/
    ‚îî‚îÄ‚îÄ migrations/20231113_initial.sql
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–¥–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –§–∞–π–ª–æ–≤ | –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ |
|-----------|--------|------------|-------------|
| Router | 1 | 126 | –•–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω |
| Helpers | 4 | 290 | –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –Ω–∞–±–æ—Ä |
| Endpoints | 14 | ~1,500 | –ë–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ |
| **–ò–¢–û–ì–û** | **19** | **~1,916** | **–ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** |

---

## –ö–∞—Ä—Ç–∞ API –º–∞—Ä—à—Ä—É—Ç–æ–≤

### –û–±–∑–æ—Ä

**–í—Å–µ–≥–æ –º–∞—Ä—à—Ä—É—Ç–æ–≤:** 23  
**–ü—É–±–ª–∏—á–Ω—ã—Ö:** 8  
**–° –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π:** 15

### –î–µ—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞

#### 1. Health Check

| –ú–∞—Ä—à—Ä—É—Ç | –ú–µ—Ç–æ–¥ | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---------|-------|----------------|---------------|--------|
| `/api/health` | GET | ‚ùå | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, healthcheck | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |

**–û–ø–∏—Å–∞–Ω–∏–µ:**  
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è API –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î.

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:** –ù–µ—Ç

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```json
{
  "success": true,
  "data": {
    "status": "healthy",
    "database": "connected",
    "timestamp": "2024-11-17 10:30:00"
  }
}
```

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ë–î:** `users` (test connection)

**–ü—Ä–æ–±–ª–µ–º—ã:** 
- ‚ö†Ô∏è –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200, –¥–∞–∂–µ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –ë–î (line 13-17)
- ‚ö†Ô∏è –ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (Redis, file system, external APIs)

---

#### 2. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (3 –º–∞—Ä—à—Ä—É—Ç–∞)

##### 2.1 Login

| –ú–∞—Ä—à—Ä—É—Ç | –ú–µ—Ç–æ–¥ | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---------|-------|----------------|---------------|--------|
| `/api/auth/login` | POST | ‚ùå | –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```json
{
  "login": "admin",
  "password": "admin123"
}
```

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```json
{
  "success": true,
  "data": {
    "user": {
      "id": 1,
      "login": "admin",
      "name": "Admin User",
      "email": "admin@example.com",
      "role": "admin"
    },
    "access_token": "eyJ...",
    "refresh_token": "eyJ...",
    "expires_in": 3600
  }
}
```

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ë–î:** `users`

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç bcrypt –¥–ª—è –ø–∞—Ä–æ–ª–µ–π
- ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç last_login_at
- ‚ùå **–ù–ï–¢ rate limiting** - —É—è–∑–≤–∏–º–æ—Å—Ç—å –∫ brute-force –∞—Ç–∞–∫–∞–º
- ‚ùå **–ù–ï–¢ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è** –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞
- ‚ö†Ô∏è Refresh token –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–∞–∫–æ–π –∂–µ JWT (–Ω–µ —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –ë–î)

---

##### 2.2 Get Current User

| –ú–∞—Ä—à—Ä—É—Ç | –ú–µ—Ç–æ–¥ | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---------|-------|----------------|---------------|--------|
| `/api/auth/me` | GET | ‚úÖ JWT | –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:** Authorization header: `Bearer {token}`

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```json
{
  "success": true,
  "data": {
    "id": 1,
    "login": "admin",
    "name": "Admin User",
    "email": "admin@example.com",
    "role": "admin",
    "last_login_at": "2024-11-17 10:00:00",
    "created_at": "2023-11-13 12:00:00"
  }
}
```

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ë–î:** `users`

---

##### 2.3 Logout

| –ú–∞—Ä—à—Ä—É—Ç | –ú–µ—Ç–æ–¥ | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---------|-------|----------------|---------------|--------|
| `/api/auth/logout` | POST | ‚ùå | –ê–¥–º–∏–Ω–∫–∞ | ‚ö†Ô∏è **–ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å** |

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –ü—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç success –±–µ–∑ –ª–æ–≥–∏–∫–∏
- ‚ùå –ù–µ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ç–æ–∫–µ–Ω (JWT –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–æ–∑–≤–∞–Ω)
- ‚ùå –ù–µ –æ—á–∏—â–∞–µ—Ç refresh token –∏–∑ –ë–î (–µ—Å–ª–∏ –±—ã –æ–Ω —Ç–∞–º —Ö—Ä–∞–Ω–∏–ª—Å—è)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** 
–î–æ–±–∞–≤–∏—Ç—å blacklist —Ç–æ–∫–µ–Ω–æ–≤ –≤ –ë–î –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ç–æ–∑–≤–∞–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤.

---

#### 3. –°–µ—Ä–≤–∏—Å—ã (4 –º–∞—Ä—à—Ä—É—Ç–∞)

| –ú–∞—Ä—à—Ä—É—Ç | –ú–µ—Ç–æ–¥ | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---------|-------|----------------|---------------|--------|
| `/api/services` | GET | ‚ùå | –§—Ä–æ–Ω—Ç–µ–Ω–¥, –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |
| `/api/services` | POST | ‚úÖ JWT | –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |
| `/api/services` | PUT | ‚úÖ JWT | –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |
| `/api/services` | DELETE | ‚úÖ JWT | –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |

**GET - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤:**

–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: –ù–µ—Ç

–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "3D –ø–µ—á–∞—Ç—å FDM",
      "slug": "fdm-printing",
      "icon": "fa-cube",
      "description": "–û–ø–∏—Å–∞–Ω–∏–µ...",
      "price": "–æ—Ç 50‚ÇΩ/–≥",
      "active": 1,
      "featured": 0,
      "display_order": 0,
      "features": [
        "–ë—ã—Å—Ç—Ä–∞—è –ø–µ—á–∞—Ç—å",
        "–ù–∏–∑–∫–∞—è —Ü–µ–Ω–∞"
      ]
    }
  ]
}
```

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ë–î:** `services`, `service_features`

**POST/PUT - –°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞:**

–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
```json
{
  "id": 1,  // —Ç–æ–ª—å–∫–æ –¥–ª—è PUT
  "name": "–ù–∞–∑–≤–∞–Ω–∏–µ",
  "slug": "url-slug",
  "icon": "fa-icon",
  "description": "–û–ø–∏—Å–∞–Ω–∏–µ",
  "price": "–æ—Ç 50‚ÇΩ",
  "features": ["Feature 1", "Feature 2"]
}
```

**DELETE - –ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ:**

–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: `?id=1`  
–í—ã–ø–æ–ª–Ω—è–µ—Ç: `UPDATE services SET active = 0`

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚úÖ –•–æ—Ä–æ—à–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ JOIN –¥–ª—è features
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç prepared statements
- ‚ö†Ô∏è –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ slug –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ INSERT
- ‚ö†Ô∏è DELETE –∏—Å–ø–æ–ª—å–∑—É–µ—Ç query param –≤–º–µ—Å—Ç–æ body
- ‚ö†Ô∏è –ù–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –¥–ª—è GET
- ‚ùå –ù–µ—Ç –ø–æ–∏—Å–∫–∞/—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

---

#### 4. –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ (4 –º–∞—Ä—à—Ä—É—Ç–∞)

| –ú–∞—Ä—à—Ä—É—Ç | –ú–µ—Ç–æ–¥ | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---------|-------|----------------|---------------|--------|
| `/api/portfolio` | GET | ‚ùå | –§—Ä–æ–Ω—Ç–µ–Ω–¥, –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |
| `/api/portfolio` | POST | ‚úÖ JWT | –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |
| `/api/portfolio` | PUT | ‚úÖ JWT | –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |
| `/api/portfolio` | DELETE | ‚úÖ JWT | –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ë–î:** `portfolio`

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–µ–∑ JOIN
- ‚ö†Ô∏è –ù–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ category (–∞ category –µ—Å—Ç—å –≤ —Å—Ö–µ–º–µ)
- ‚ö†Ô∏è DELETE - –∂–µ—Å—Ç–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (–Ω–µ—Ç soft delete)
- ‚ö†Ô∏è –ù–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
- ‚ö†Ô∏è –ù–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (—Ç–æ–ª—å–∫–æ URL)

---

#### 5. –û—Ç–∑—ã–≤—ã (4 –º–∞—Ä—à—Ä—É—Ç–∞)

| –ú–∞—Ä—à—Ä—É—Ç | –ú–µ—Ç–æ–¥ | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---------|-------|----------------|---------------|--------|
| `/api/testimonials` | GET | ‚ùå | –§—Ä–æ–Ω—Ç–µ–Ω–¥, –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |
| `/api/testimonials` | POST | ‚úÖ JWT | –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |
| `/api/testimonials` | PUT | ‚úÖ JWT | –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |
| `/api/testimonials` | DELETE | ‚úÖ JWT | –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ë–î:** `testimonials`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π: `name`‚Üí`author`, `text`‚Üí`content`, `approved`‚Üí`active`
- GET –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–µ (`approved = 1`)

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç display_order –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
- ‚ö†Ô∏è –ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π —Å–æ–∑–¥–∞–µ—Ç –ø—É—Ç–∞–Ω–∏—Ü—É
- ‚ö†Ô∏è DELETE - –º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (approved = 0), –Ω–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–∞ –ø—É—Ç–∞–µ—Ç
- ‚ö†Ô∏è –ù–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
- ‚ùå POST —Å–æ–∑–¥–∞–µ—Ç testimonial —Å—Ä–∞–∑—É —Å approved=1 (–Ω–µ—Ç –º–æ–¥–µ—Ä–∞—Ü–∏–∏)

---

#### 6. FAQ (4 –º–∞—Ä—à—Ä—É—Ç–∞)

| –ú–∞—Ä—à—Ä—É—Ç | –ú–µ—Ç–æ–¥ | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---------|-------|----------------|---------------|--------|
| `/api/faq` | GET | ‚ùå | –§—Ä–æ–Ω—Ç–µ–Ω–¥, –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |
| `/api/faq` | POST | ‚úÖ JWT | –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |
| `/api/faq` | PUT | ‚úÖ JWT | –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |
| `/api/faq` | DELETE | ‚úÖ JWT | –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ë–î:** `faq`

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç display_order
- ‚ö†Ô∏è POST –ø—Ä–∏–Ω–∏–º–∞–µ—Ç category, –Ω–æ –Ω–µ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –µ–≥–æ
- ‚ö†Ô∏è –ù–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ category –Ω–∞ GET
- ‚ö†Ô∏è DELETE - –º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (active = 0)

---

#### 7. –ö–æ–Ω—Ç–µ–Ω—Ç (2 –º–∞—Ä—à—Ä—É—Ç–∞)

| –ú–∞—Ä—à—Ä—É—Ç | –ú–µ—Ç–æ–¥ | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---------|-------|----------------|---------------|--------|
| `/api/content` | GET | ‚ùå | –§—Ä–æ–Ω—Ç–µ–Ω–¥ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |
| `/api/content` | PUT | ‚úÖ JWT | –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ë–î:** `site_content`

**GET - –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞:**
```json
{
  "success": true,
  "data": {
    "hero": {
      "title": "–ó–∞–≥–æ–ª–æ–≤–æ–∫",
      "content": { /* JSON */ }
    },
    "about": { /* ... */ }
  }
}
```

**PUT - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞:**
```json
{
  "hero": {
    "title": "–ù–æ–≤—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫",
    "content": { /* JSON */ }
  }
}
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚úÖ –•–æ—Ä–æ—à–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å JSON content
- ‚úÖ Upsert –ª–æ–≥–∏–∫–∞ (INSERT or UPDATE)
- ‚ö†Ô∏è –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ JSON —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- ‚ö†Ô∏è –ù–µ—Ç –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

---

#### 8. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (2 –º–∞—Ä—à—Ä—É—Ç–∞)

##### 8.1 Admin Settings

| –ú–∞—Ä—à—Ä—É—Ç | –ú–µ—Ç–æ–¥ | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---------|-------|----------------|---------------|--------|
| `/api/settings` | GET | ‚úÖ JWT | –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |
| `/api/settings` | PUT | ‚úÖ JWT | –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ë–î:** `site_settings`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```json
{
  "calculator_config": { /* ... */ },
  "form_config": { /* ... */ },
  "telegram_config": { /* ... */ },
  "general_config": { /* ... */ }
}
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚úÖ JSON —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚ö†Ô∏è –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ JSON —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- ‚ö†Ô∏è –ù–µ—Ç –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
- ‚ùå –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ (–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º)

---

##### 8.2 Public Settings

| –ú–∞—Ä—à—Ä—É—Ç | –ú–µ—Ç–æ–¥ | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---------|-------|----------------|---------------|--------|
| `/api/settings/public` | GET | ‚ùå | –§—Ä–æ–Ω—Ç–µ–Ω–¥ | ‚ö†Ô∏è **–ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å** |

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥ –ø—É—Å—Ç—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤
- ‚ùå –ù–µ —á–∏—Ç–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
- ‚ùå –§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–∂–∏–¥–∞–µ—Ç `materialPrices`, `servicePrices`, etc., –Ω–æ –ø–æ–ª—É—á–∞–µ—Ç –ø—É—Å—Ç—ã–µ –º–∞—Å—Å–∏–≤—ã

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
–ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å, —á—Ç–æ–±—ã —á–∏—Ç–∞—Ç—å calculator_config –∏–∑ site_settings –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–µ –ø–æ–ª—è.

---

#### 9. –ó–∞–∫–∞–∑—ã (4 –º–∞—Ä—à—Ä—É—Ç–∞)

| –ú–∞—Ä—à—Ä—É—Ç | –ú–µ—Ç–æ–¥ | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---------|-------|----------------|---------------|--------|
| `/api/orders` | POST | ‚ùå | –§—Ä–æ–Ω—Ç–µ–Ω–¥ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |
| `/api/orders` | GET | ‚úÖ JWT | –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |
| `/api/orders` | PUT | ‚úÖ JWT | –ê–¥–º–∏–Ω–∫–∞ | ‚ö†Ô∏è **–î–æ—Ä–∞–±–æ—Ç–∞—Ç—å** |
| `/api/orders` | DELETE | ‚úÖ JWT | –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ë–î:** `orders`

**POST - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ (–ø—É–±–ª–∏—á–Ω—ã–π):**

–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
```json
{
  "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "email": "ivan@example.com",
  "phone": "+7 999 123-45-67",
  "message": "–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞",
  "calculator_data": { /* JSON */ }
}
```

–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
```json
{
  "success": true,
  "data": {
    "id": 123,
    "order_number": "ORD-20241117-A1B2C3"
  }
}
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π order_number
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
- ‚ùå **–ù–ï–¢ rate limiting** - —É—è–∑–≤–∏–º–æ—Å—Ç—å –∫ spam –∞—Ç–∞–∫–∞–º
- ‚ùå **–ù–ï–¢ CAPTCHA** –∏–ª–∏ honeypot –∑–∞—â–∏—Ç—ã
- ‚ùå Telegram –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è - –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è @file_get_contents)
- ‚ö†Ô∏è –ù–µ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ñ–æ—Ä–º–∞—Ç email/phone
- ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä—è–º—É—é –æ—Ç–ø—Ä–∞–≤–∫—É –≤ Telegram (–Ω–µ —á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥—å)

**GET - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞–∫–∞–∑–æ–≤:**

Query params:
- `page` (default: 1)
- `limit` (default: 20)
- `status` (optional filter)

**PUT - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞:**

–ü—Ä–æ–±–ª–µ–º–∞: –ø—ã—Ç–∞–µ—Ç—Å—è –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª–µ `notes`, –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç –≤ –±–∞–∑–æ–≤–æ–π —Å—Ö–µ–º–µ –ë–î.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `notes` –≤ –º–∏–≥—Ä–∞—Ü–∏—é –∏–ª–∏ —É–±—Ä–∞—Ç—å –∏–∑ –∫–æ–¥–∞
- –í—ã–Ω–µ—Å—Ç–∏ Telegram –æ—Ç–ø—Ä–∞–≤–∫—É –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ—á–µ—Ä–µ–¥—å

---

#### 10. Telegram (3 –º–∞—Ä—à—Ä—É—Ç–∞)

| –ú–∞—Ä—à—Ä—É—Ç | –ú–µ—Ç–æ–¥ | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---------|-------|----------------|---------------|--------|
| `/api/telegram/status` | GET | ‚úÖ JWT | –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |
| `/api/telegram/test` | POST | ‚úÖ JWT | –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |
| `/api/telegram/send` | POST | ‚úÖ JWT | –ê–¥–º–∏–Ω–∫–∞ | ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å** |

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚úÖ –•–æ—Ä–æ—à–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚ö†Ô∏è –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ (–±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å)
- ‚ùå –ù–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚ùå –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ (retry logic)

---

### –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã

#### ‚ùå `/api/stats` - MISSING

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –§—Ä–æ–Ω—Ç–µ–Ω–¥ (apiClient.js line 188-198)

**–ü—Ä–æ–±–ª–µ–º–∞:**
–§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–∂–∏–¥–∞–µ—Ç endpoint `/api/stats`, –Ω–æ –æ–Ω –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Ä–æ—É—Ç–µ—Ä–µ!

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
–°–æ–∑–¥–∞—Ç—å endpoint, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:
```json
{
  "projects_completed": 500,
  "clients_served": 300,
  "materials_available": 15,
  "years_experience": 5
}
```

---

## –ê–Ω–∞–ª–∏–∑ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤

### 1. Database.php (72 —Å—Ç—Ä–æ–∫–∏)

**–ü–∞—Ç—Ç–µ—Ä–Ω:** Singleton  
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:** PDO wrapper —Å prepared statements

**–ú–µ—Ç–æ–¥—ã:**
- `getInstance()` - Singleton instance
- `connect()` - PDO connection
- `query()` - Execute prepared statement
- `fetchAll()` - Fetch all rows
- `fetchOne()` - Fetch single row
- `execute()` - Execute and return affected rows
- `lastInsertId()` - Get last insert ID
- `testConnection()` - Test DB connection

**–û—Ü–µ–Ω–∫–∞:**

‚úÖ **–ü–ª—é—Å—ã:**
- Singleton –ø–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç PDO —Å prepared statements (–∑–∞—â–∏—Ç–∞ –æ—Ç SQL injection)
- `PDO::ATTR_EMULATE_PREPARES => false` - –∏—Å—Ç–∏–Ω–Ω—ã–µ prepared statements
- –•–æ—Ä–æ—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

‚ùå **–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –ù–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏/–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞)
- ‚ùå –ù–µ—Ç query caching
- ‚ùå –ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ retry –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- ‚ö†Ô∏è Singleton –∑–∞—Ç—Ä—É–¥–Ω—è–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–µ–ª—å–∑—è –º–æ–∫–∞—Ç—å)
- ‚ö†Ô∏è –ñ–µ—Å—Ç–∫–æ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ MySQL (–Ω–µ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –î–æ–±–∞–≤–∏—Ç—å reconnect –ª–æ–≥–∏–∫—É
- –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å Dependency Injection –≤–º–µ—Å—Ç–æ Singleton

---

### 2. Response.php (56 —Å—Ç—Ä–æ–∫)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:** –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ JSON –æ—Ç–≤–µ—Ç—ã

**–ú–µ—Ç–æ–¥—ã:**
- `json()` - Raw JSON response
- `success()` - Success response
- `error()` - Error response
- `unauthorized()` - 401
- `forbidden()` - 403
- `notFound()` - 404
- `badRequest()` - 400
- `unprocessable()` - 422
- `serverError()` - 500

**–û—Ü–µ–Ω–∫–∞:**

‚úÖ **–ü–ª—é—Å—ã:**
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–æ–≤
- JSON_UNESCAPED_UNICODE –¥–ª—è –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
- JSON_PRETTY_PRINT –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ HTTP –∫–æ–¥—ã

‚ùå **–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è –í—Å–µ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç `exit` - –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- ‚ùå –ù–µ—Ç –æ–ø—Ü–∏–∏ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è trace_id (–¥–ª—è distributed tracing)
- ‚ùå –ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è metadata (pagination, etc.)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è `exit` (–¥–ª—è —Ç–µ—Å—Ç–æ–≤)
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É trace_id/request_id –≤ –æ—Ç–≤–µ—Ç—ã

---

### 3. JWT.php (65 —Å—Ç—Ä–æ–∫)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:** Custom JWT implementation (HS256)

**–ú–µ—Ç–æ–¥—ã:**
- `encode()` - Create JWT token
- `decode()` - Verify and decode JWT
- `base64UrlEncode()` - URL-safe base64
- `base64UrlDecode()` - Decode URL-safe base64

**–û—Ü–µ–Ω–∫–∞:**

‚úÖ **–ü–ª—é—Å—ã:**
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è HS256
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ —Å hash_equals (timing-safe)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ expiration
- URL-safe encoding

‚ùå **–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå **–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –£–Ø–ó–í–ò–ú–û–°–¢–¨:** Default JWT_SECRET = 'default_secret_key_change_in_production'
- ‚ùå –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ (alg) –ø—Ä–∏ decode - —É—è–∑–≤–∏–º–æ—Å—Ç—å –∫ algorithm confusion attack
- ‚ùå –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–æ–ª—å–∫–æ HS256 (–Ω–µ—Ç RS256/ES256)
- ‚ùå –ù–µ—Ç claims validation (iss, aud, nbf)
- ‚ùå –ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ revocation (blacklist)
- ‚ö†Ô∏è Custom implementation –≤–º–µ—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- ‚úÖ –ò–∑–º–µ–Ω–∏—Ç—å JWT_SECRET –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ (–º–∏–Ω–∏–º—É–º 64 —Å–∏–º–≤–æ–ª–∞)
- –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é algorithm claim
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É blacklist –¥–ª—è logout
- –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ firebase/php-jwt

---

### 4. Auth.php (97 —Å—Ç—Ä–æ–∫)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:** Authentication & Authorization

**–ú–µ—Ç–æ–¥—ã:**
- `login()` - Login with credentials
- `generateToken()` - Generate JWT
- `verifyToken()` - Verify JWT
- `checkAuth()` - Middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ auth
- `getCurrentUser()` - Get user by ID

**–û—Ü–µ–Ω–∫–∞:**

‚úÖ **–ü–ª—é—Å—ã:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç bcrypt –¥–ª—è –ø–∞—Ä–æ–ª–µ–π
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç active —Å—Ç–∞—Ç—É—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –û–±–Ω–æ–≤–ª—è–µ—Ç last_login_at
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç access –∏ refresh —Ç–æ–∫–µ–Ω—ã
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ Authorization header

‚ùå **–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå Refresh token –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–∞–∫–æ–π –∂–µ JWT (–Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ë–î)
- ‚ùå –ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ refresh (endpoint –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)
- ‚ùå –ù–µ—Ç rate limiting
- ‚ùå –ù–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞
- ‚ùå checkAuth() –≤—ã–∑—ã–≤–∞–µ—Ç Response::unauthorized() –Ω–∞–ø—Ä—è–º—É—é (–Ω–∞—Ä—É—à–∞–µ—Ç SRP)
- ‚ö†Ô∏è Refresh token –∏–º–µ–µ—Ç TTL 30 –¥–Ω–µ–π, –Ω–æ –Ω–µ–ª—å–∑—è –µ–≥–æ –æ—Ç–æ–∑–≤–∞—Ç—å

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –•—Ä–∞–Ω–∏—Ç—å refresh tokens –≤ –ë–î
- –î–æ–±–∞–≤–∏—Ç—å endpoint `/api/auth/refresh`
- –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥–æ–≤
- –î–æ–±–∞–≤–∏—Ç—å rate limiting (5 –ø–æ–ø—ã—Ç–æ–∫ / 15 –º–∏–Ω)

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 1. Telegram Bot Token –≤ config.js (–ö–†–ò–¢–ò–ß–ù–û!)

**–§–∞–π–ª:** `/config.js` line 12  
**–ü—Ä–æ–±–ª–µ–º–∞:** Telegram bot token —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø—É–±–ª–∏—á–Ω–æ–º JavaScript —Ñ–∞–π–ª–µ

```javascript
telegram: {
    botToken: '8241807858:AAE0JXxWO9HumqesNK6x_vvaMrxvRK9qKBI',
    chatId: '',
    apiUrl: 'https://api.telegram.org/bot',
    contactUrl: 'https://t.me/PrintPro_Omsk'
}
```

**–†–∏—Å–∫:**
- üî¥ –õ—é–±–æ–π –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å bot token –∏–∑ –ø—É–±–ª–∏—á–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
- üî¥ –ú–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ—Ç –¥–ª—è —Å–ø–∞–º–∞/–∞—Ç–∞–∫
- üî¥ –ú–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. **–ù–ï–ú–ï–î–õ–ï–ù–ù–û** —É–¥–∞–ª–∏—Ç—å token –∏–∑ config.js
2. Revoke —Ç–µ–∫—É—â–∏–π token —á–µ—Ä–µ–∑ @BotFather
3. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π bot token
4. –•—Ä–∞–Ω–∏—Ç—å token —Ç–æ–ª—å–∫–æ –≤ backend/.env
5. –£–¥–∞–ª–∏—Ç—å –≤—Å–µ telegram –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ frontend

---

#### 2. Default JWT Secret

**–§–∞–π–ª:** `backend/helpers/JWT.php` line 5  
**–ü—Ä–æ–±–ª–µ–º–∞:** Fallback –Ω–∞ default secret

```php
private static function getSecret() {
    return $_ENV['JWT_SECRET'] ?? 'default_secret_key_change_in_production';
}
```

**–†–∏—Å–∫:**
- üî¥ –ï—Å–ª–∏ .env –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π —Å–µ–∫—Ä–µ—Ç
- üî¥ –ú–æ–∂–Ω–æ –ø–æ–¥–¥–µ–ª–∞—Ç—å —Ç–æ–∫–µ–Ω—ã, –∑–Ω–∞—è default secret

**–†–µ—à–µ–Ω–∏–µ:**
```php
private static function getSecret() {
    $secret = $_ENV['JWT_SECRET'] ?? null;
    if (!$secret || $secret === 'default_secret_key_change_in_production') {
        throw new Exception('JWT_SECRET not configured properly');
    }
    return $secret;
}
```

---

#### 3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Rate Limiting

**–ó–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç:**
- `/api/auth/login` - brute-force –∞—Ç–∞–∫–∏
- `/api/orders` (POST) - spam –∞—Ç–∞–∫–∏

**–†–∏—Å–∫:**
- üî¥ Brute-force –ø–µ—Ä–µ–±–æ—Ä –ø–∞—Ä–æ–ª–µ–π
- üî¥ Spam –∑–∞–∫–∞–∑–æ–≤
- üî¥ DDoS –∞—Ç–∞–∫–∏

**–†–µ—à–µ–Ω–∏–µ:**
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å rate limiting:
```php
// Example: 5 requests per minute per IP
$ip = $_SERVER['REMOTE_ADDR'];
$key = "rate_limit:$ip";
// Check rate limit in Redis/DB
```

---

### üü° –°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 4. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ CAPTCHA

**Endpoint:** `/api/orders` (POST)  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –±–æ—Ç–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å Google reCAPTCHA v3
- –ò–ª–∏ honeypot field

---

#### 5. SQL Injection –≤ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏

**–§–∞–π–ª:** `backend/api/orders.php` line 92  
**–ü—Ä–æ–±–ª–µ–º–∞:** LIMIT/OFFSET –Ω–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω—ã

```php
LIMIT {$limit} OFFSET {$offset}
```

**–†–∏—Å–∫:**
- ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ —É—è–∑–≤–∏–º–æ, –µ—Å–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
```php
$limit = min(max(1, (int)$limit), 100);
$offset = max(0, (int)$offset);
```

---

#### 6. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ CSRF –∑–∞—â–∏—Ç—ã

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç CSRF —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è state-changing –æ–ø–µ—Ä–∞—Ü–∏–π

**–†–∏—Å–∫:**
- ‚ö†Ô∏è CSRF –∞—Ç–∞–∫–∏ –Ω–∞ POST/PUT/DELETE endpoints

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å Origin/Referer headers
- –ò–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å CSRF —Ç–æ–∫–µ–Ω—ã

---

#### 7. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–∏–º–µ—Ä—ã:**
- Email –Ω–µ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è (orders.php)
- Phone –Ω–µ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è
- URL –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è (portfolio image_url)

**–†–µ—à–µ–Ω–∏–µ:**
–°–æ–∑–¥–∞—Ç—å Validator –∫–ª–∞—Å—Å:
```php
class Validator {
    public static function email($email) { /* ... */ }
    public static function phone($phone) { /* ... */ }
    public static function url($url) { /* ... */ }
}
```

---

### üü¢ –•–æ—Ä–æ—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã)

‚úÖ Prepared statements (–∑–∞—â–∏—Ç–∞ –æ—Ç SQL injection)  
‚úÖ Password hashing (bcrypt)  
‚úÖ JWT tokens (–Ω–µ –≤ cookies - –∑–∞—â–∏—Ç–∞ –æ—Ç CSRF)  
‚úÖ CORS –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ .env  
‚úÖ Authorization header checking  
‚úÖ Active user check

---

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ü—Ä–æ–±–ª–µ–º—ã

#### 1. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –∫ `/api/services`, `/api/portfolio`, etc. –≤—ã–ø–æ–ª–Ω—è–µ—Ç DB –∑–∞–ø—Ä–æ—Å.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å HTTP Cache-Control headers –¥–ª—è GET endpoints
- –ò–ª–∏ Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

```php
// Example
header('Cache-Control: public, max-age=300'); // 5 minutes
```

---

#### 2. N+1 Query Problem

**Endpoint:** `/api/services`  
**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç JOIN —Å GROUP_CONCAT ‚úÖ

**–û—Ü–µ–Ω–∫–∞:** –•–æ—Ä–æ—à–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ, –Ω–µ—Ç N+1 –ø—Ä–æ–±–ª–µ–º—ã.

---

#### 3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏

**Endpoints –±–µ–∑ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏:**
- `/api/services` (GET)
- `/api/portfolio` (GET)
- `/api/testimonials` (GET)
- `/api/faq` (GET)

**–†–∏—Å–∫:**
- ‚ö†Ô∏è –ü—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –¥–∞–Ω–Ω—ã—Ö –±—É–¥–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ

**–†–µ—à–µ–Ω–∏–µ:**
–î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é –ø–∞–≥–∏–Ω–∞—Ü–∏—é —Å query params:
```
/api/services?page=1&limit=20
```

---

#### 4. –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è Telegram –æ—Ç–ø—Ä–∞–≤–∫–∞

**–§–∞–π–ª:** `backend/api/orders.php` line 55  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `file_get_contents()` —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ

**–†–∏—Å–∫:**
- ‚ö†Ô∏è –ë–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç –∫–ª–∏–µ–Ω—Ç—É –Ω–∞ 1-3 —Å–µ–∫—É–Ω–¥—ã
- ‚ö†Ô∏è –ï—Å–ª–∏ Telegram API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∑–∞–∫–∞–∑ —Å–æ–∑–¥–∞—Å—Ç—Å—è, –Ω–æ –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∏—Ç —Ç–∞–π–º–∞—É—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CURL —Å timeout
2. –ò–ª–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ—á–µ—Ä–µ–¥—å (Redis + worker)

---

#### 5. JSON –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ü–∏–∫–ª–µ

**–§–∞–π–ª:** `backend/api/orders.php` line 96-98

```php
foreach ($orders as &$order) {
    if (!empty($order['calculator_data'])) {
        $order['calculator_data'] = json_decode($order['calculator_data'], true);
    }
}
```

**–û—Ü–µ–Ω–∫–∞:** –ù–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤, –Ω–æ –º–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å.

---

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –î–µ–π—Å—Ç–≤–∏–µ | –í—ã–∏–≥—Ä—ã—à |
|-----------|----------|---------|
| üî¥ –í—ã—Å–æ–∫–∏–π | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è Telegram –æ—Ç–ø—Ä–∞–≤–∫–∞ | -2—Å –Ω–∞ –∑–∞–ø—Ä–æ—Å |
| üü° –°—Ä–µ–¥–Ω–∏–π | HTTP –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è GET | -50ms –Ω–∞ –∑–∞–ø—Ä–æ—Å |
| üü° –°—Ä–µ–¥–Ω–∏–π | –ü–∞–≥–∏–Ω–∞—Ü–∏—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤ | –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å |
| üü¢ –ù–∏–∑–∫–∏–π | Redis –¥–ª—è —Å–µ—Å—Å–∏–π | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π |

---

## –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–∏—Å–∫–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 1. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (–ö–†–ò–¢–ò–ß–ù–û)

**–ü—Ä–æ–±–ª–µ–º–∞:**
- ‚ùå –ù–µ—Ç –ª–æ–≥–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚ùå –ù–µ—Ç –ª–æ–≥–æ–≤ –æ—à–∏–±–æ–∫ (—Ç–æ–ª—å–∫–æ –≤ debug mode)
- ‚ùå –ù–µ—Ç –ª–æ–≥–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (login attempts)
- ‚ùå –ù–µ—Ç –ª–æ–≥–æ–≤ –±–∏–∑–Ω–µ—Å-—Å–æ–±—ã—Ç–∏–π (–∑–∞–∫–∞–∑—ã, –ø–ª–∞—Ç–µ–∂–∏)

**–†–∏—Å–∫:**
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∞–Ω–æ–º–∞–ª–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**
–°–æ–∑–¥–∞—Ç—å Logger –∫–ª–∞—Å—Å:
```php
class Logger {
    public static function info($message, $context = []) { /* ... */ }
    public static function error($message, $context = []) { /* ... */ }
    public static function security($event, $context = []) { /* ... */ }
}
```

–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤:
- `logs/api.log` - –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã
- `logs/error.log` - –æ—à–∏–±–∫–∏
- `logs/security.log` - security events

---

#### 2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç –º–µ—Ç—Ä–∏–∫ (request count, latency, errors)
- –ù–µ—Ç alerting
- –ù–µ—Ç dashboard

**–†–µ—à–µ–Ω–∏–µ:**
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Sentry –¥–ª—è –æ—à–∏–±–æ–∫
- –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ–π —Å—á–µ—Ç—á–∏–∫ –º–µ—Ç—Ä–∏–∫ –≤ —Ñ–∞–π–ª/Redis

---

#### 3. –°–º–µ—à–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–µ–π

**–ü—Ä–∏–º–µ—Ä:** `orders.php` –¥–µ–ª–∞–µ—Ç:
1. –í–∞–ª–∏–¥–∞—Ü–∏—é
2. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –≤ –ë–î
3. –û—Ç–ø—Ä–∞–≤–∫—É –≤ Telegram
4. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–∞—Ä—É—à–µ–Ω–∏–µ Single Responsibility Principle

**–†–µ—à–µ–Ω–∏–µ:**
```php
// Service layer
class OrderService {
    public function createOrder($data) { /* ... */ }
}

class TelegramNotifier {
    public function notifyNewOrder($order) { /* ... */ }
}
```

---

#### 4. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
–í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–∞ –ø–æ endpoint —Ñ–∞–π–ª–∞–º, –Ω–µ—Ç –µ–¥–∏–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞.

**–†–µ—à–µ–Ω–∏–µ:**
–°–æ–∑–¥–∞—Ç—å Validator helper –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ–∑–¥–µ.

---

#### 5. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ API –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å API –±–µ–∑ breaking changes.

**–†–µ—à–µ–Ω–∏–µ:**
```
/api/v1/services
/api/v2/services
```

---

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–æ—á–∫–∏ –æ—Ç–∫–∞–∑–∞

#### 1. Orders.php - Telegram –æ—Ç–ø—Ä–∞–≤–∫–∞

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –ö–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–µ—Ç –∑–∞–∫–∞–∑
2. –ë–î –∑–∞–ø—Ä–æ—Å —É—Å–ø–µ—à–µ–Ω ‚Üí –∑–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω
3. Telegram API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí —Ç–∞–π–º–∞—É—Ç 30 —Å–µ–∫—É–Ω–¥
4. –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —Ç–∞–π–º–∞—É—Ç, –¥—É–º–∞–µ—Ç —á—Ç–æ –∑–∞–∫–∞–∑ –Ω–µ —Å–æ–∑–¥–∞–Ω
5. –ü–æ–≤—Ç–æ—Ä—è–µ—Ç –∑–∞–ø—Ä–æ—Å ‚Üí –¥—É–±–ª—å –∑–∞–∫–∞–∑–∞

**–†–µ—à–µ–Ω–∏–µ:**
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥—å
- –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å telegram_queue —Ç–∞–±–ª–∏—Ü—É

---

#### 2. Database connection failure

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
MySQL –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí –≤—Å–µ endpoints –ø–∞–¥–∞—é—Ç.

**–†–µ—à–µ–Ω–∏–µ:**
- Reconnect –ª–æ–≥–∏–∫–∞ –≤ Database.php
- Circuit breaker pattern

---

#### 3. JWT secret leak

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
JWT_SECRET —É—Ç–µ–∫ ‚Üí –≤—Å–µ —Ç–æ–∫–µ–Ω—ã —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω—ã.

**–†–µ—à–µ–Ω–∏–µ:**
- –†–æ—Ç–∞—Ü–∏—è JWT_SECRET
- Blacklist —Å—Ç–∞—Ä—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (—Å–¥–µ–ª–∞—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ)

1. **–£–¥–∞–ª–∏—Ç—å Telegram bot token –∏–∑ config.js**
   - Revoke token —á–µ—Ä–µ–∑ @BotFather
   - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π token
   - –•—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤ backend/.env

2. **–£–±—Ä–∞—Ç—å default JWT_SECRET fallback**
   - –ö–∏–Ω—É—Ç—å exception, –µ—Å–ª–∏ JWT_SECRET –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

3. **–î–æ–±–∞–≤–∏—Ç—å rate limiting**
   - `/api/auth/login` - 5 –ø–æ–ø—ã—Ç–æ–∫ / 15 –º–∏–Ω
   - `/api/orders` - 3 –∑–∞–∫–∞–∑–∞ / —á–∞—Å —Å –æ–¥–Ω–æ–≥–æ IP

4. **–°–æ–∑–¥–∞—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π endpoint `/api/stats`**

5. **–ü–æ—á–∏–Ω–∏—Ç—å `/api/settings/public`**
   - –ß–∏—Ç–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞

6. **–î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –õ–æ–≥–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
   - –õ–æ–≥–∏ –æ—à–∏–±–æ–∫
   - –õ–æ–≥–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

---

### üü° –í–∞–∂–Ω—ã–µ (–≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è)

7. **–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
   - Email format
   - Phone format
   - URL validation

8. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è Telegram –æ—Ç–ø—Ä–∞–≤–∫–∞**
   - –í—ã–Ω–µ—Å—Ç–∏ –≤ –æ—á–µ—Ä–µ–¥—å –∏–ª–∏ background worker

9. **–î–æ–±–∞–≤–∏—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é**
   - –î–ª—è –≤—Å–µ—Ö GET endpoints —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∑–∞–ø–∏—Å—è–º–∏

10. **–î–æ–±–∞–≤–∏—Ç—å CAPTCHA –¥–ª—è `/api/orders`**

11. **–ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å `/api/auth/logout`**
    - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å token blacklist

12. **–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `notes` –≤ orders —Ç–∞–±–ª–∏—Ü—É**
    - –ò–ª–∏ —É–±—Ä–∞—Ç—å –∏–∑ PUT endpoint

---

### üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ (–Ω–∞ –±—É–¥—É—â–µ–µ)

13. **API –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**
    - `/api/v1/...`

14. **Service layer**
    - –í—ã–Ω–µ—Å—Ç–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏–∑ endpoint —Ñ–∞–π–ª–æ–≤

15. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
    - HTTP Cache-Control headers
    - Redis –¥–ª—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö

16. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏**
    - Sentry –¥–ª—è –æ—à–∏–±–æ–∫
    - –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

17. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
    - Unit tests –¥–ª—è helpers
    - Integration tests –¥–ª—è endpoints

18. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API**
    - OpenAPI/Swagger —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

19. **Webhook –¥–ª—è Telegram**
    - –í–º–µ—Å—Ç–æ polling –¥–ª—è –æ–±—Ä–∞—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

---

## –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –§–∞–∑–∞ 1: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (1-2 –¥–Ω—è)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô

**–ó–∞–¥–∞—á–∏:**

1. ‚úÖ **–ê—É–¥–∏—Ç –∑–∞–≤–µ—Ä—à–µ–Ω** - —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç

2. **–£–¥–∞–ª–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –∏–∑ frontend** (2 —á–∞—Å–∞)
   - [ ] –£–¥–∞–ª–∏—Ç—å telegram config –∏–∑ config.js
   - [ ] Revoke —Å—Ç–∞—Ä—ã–π bot token
   - [ ] –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π bot token
   - [ ] –û–±–Ω–æ–≤–∏—Ç—å backend/.env

3. **–£–ª—É—á—à–∏—Ç—å JWT –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** (1 —á–∞—Å)
   - [ ] –£–±—Ä–∞—Ç—å default secret fallback
   - [ ] –î–æ–±–∞–≤–∏—Ç—å validation –∞–ª–≥–æ—Ä–∏—Ç–º–∞

4. **–î–æ–±–∞–≤–∏—Ç—å rate limiting** (4 —á–∞—Å–∞)
   - [ ] –°–æ–∑–¥–∞—Ç—å RateLimiter helper
   - [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫ /api/auth/login
   - [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫ /api/orders

5. **–î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** (4 —á–∞—Å–∞)
   - [ ] –°–æ–∑–¥–∞—Ç—å Logger helper
   - [ ] –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã
   - [ ] –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏
   - [ ] –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å login attempts

---

### –§–∞–∑–∞ 2: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤ (1 –¥–µ–Ω—å)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô

**–ó–∞–¥–∞—á–∏:**

6. **–°–æ–∑–¥–∞—Ç—å `/api/stats`** (2 —á–∞—Å–∞)
   - [ ] –°–æ–∑–¥–∞—Ç—å backend/api/stats.php
   - [ ] –î–æ–±–∞–≤–∏—Ç—å route –≤ index.php
   - [ ] –í–µ—Ä–Ω—É—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–∑ –ë–î

7. **–ü–æ—á–∏–Ω–∏—Ç—å `/api/settings/public`** (2 —á–∞—Å–∞)
   - [ ] –ß–∏—Ç–∞—Ç—å calculator_config –∏–∑ site_settings
   - [ ] –í–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—É–±–ª–∏—á–Ω—ã–µ –ø–æ–ª—è

8. **–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é** (4 —á–∞—Å–∞)
   - [ ] –°–æ–∑–¥–∞—Ç—å Validator helper
   - [ ] –î–æ–±–∞–≤–∏—Ç—å email validation –≤ orders.php
   - [ ] –î–æ–±–∞–≤–∏—Ç—å phone validation
   - [ ] –î–æ–±–∞–≤–∏—Ç—å URL validation –≤ portfolio.php

---

### –§–∞–∑–∞ 3: –£–ª—É—á—à–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (2-3 –¥–Ω—è)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

**–ó–∞–¥–∞—á–∏:**

9. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è Telegram –æ—Ç–ø—Ä–∞–≤–∫–∞** (4 —á–∞—Å–∞)
   - [ ] –°–æ–∑–¥–∞—Ç—å telegram_queue —Ç–∞–±–ª–∏—Ü—É
   - [ ] –ò–∑–º–µ–Ω–∏—Ç—å orders.php –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ –æ—á–µ—Ä–µ–¥—å
   - [ ] –°–æ–∑–¥–∞—Ç—å worker —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏

10. **–î–æ–±–∞–≤–∏—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é** (3 —á–∞—Å–∞)
    - [ ] –û–±–Ω–æ–≤–∏—Ç—å services.php
    - [ ] –û–±–Ω–æ–≤–∏—Ç—å portfolio.php
    - [ ] –û–±–Ω–æ–≤–∏—Ç—å testimonials.php
    - [ ] –û–±–Ω–æ–≤–∏—Ç—å faq.php

11. **–î–æ–±–∞–≤–∏—Ç—å CAPTCHA** (2 —á–∞—Å–∞)
    - [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å reCAPTCHA v3
    - [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≤ orders.php

12. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ logout** (2 —á–∞—Å–∞)
    - [ ] –°–æ–∑–¥–∞—Ç—å token_blacklist —Ç–∞–±–ª–∏—Ü—É
    - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å blacklist –ø—Ä–æ–≤–µ—Ä–∫—É
    - [ ] –û–±–Ω–æ–≤–∏—Ç—å logout.php

13. **–ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è orders.notes** (1 —á–∞—Å)
    - [ ] –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
    - [ ] –ò–ª–∏ —É–±—Ä–∞—Ç—å –∏–∑ PUT endpoint

---

### –§–∞–∑–∞ 4: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (2-3 –¥–Ω—è)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–ò–ó–ö–ò–ô

**–ó–∞–¥–∞—á–∏:**

14. **HTTP –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** (2 —á–∞—Å–∞)
    - [ ] –î–æ–±–∞–≤–∏—Ç—å Cache-Control headers –¥–ª—è GET
    - [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ production

15. **Service layer** (1 –¥–µ–Ω—å)
    - [ ] –°–æ–∑–¥–∞—Ç—å services/ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
    - [ ] –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É
    - [ ] –û–±–Ω–æ–≤–∏—Ç—å endpoints

16. **API –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** (4 —á–∞—Å–∞)
    - [ ] –°–æ–∑–¥–∞—Ç—å /api/v1/ —Å—Ç—Ä—É–∫—Ç—É—Ä—É
    - [ ] –û–±–Ω–æ–≤–∏—Ç—å —Ä–æ—É—Ç–µ—Ä
    - [ ] –û–±–Ω–æ–≤–∏—Ç—å frontend

17. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** (1 –¥–µ–Ω—å)
    - [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Sentry
    - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã
    - [ ] –°–æ–∑–¥–∞—Ç—å dashboard

18. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** (2 –¥–Ω—è)
    - [ ] –ù–∞–ø–∏—Å–∞—Ç—å unit tests –¥–ª—è helpers
    - [ ] –ù–∞–ø–∏—Å–∞—Ç—å integration tests –¥–ª—è endpoints
    - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD

---

### –§–∞–∑–∞ 5: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (1 –¥–µ–Ω—å)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–ò–ó–ö–ò–ô

**–ó–∞–¥–∞—á–∏:**

19. **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** (4 —á–∞—Å–∞)
    - [ ] –ù–∞–ø–∏—Å–∞—Ç—å OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é
    - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Swagger UI

20. **Developer guide** (4 —á–∞—Å–∞)
    - [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
    - [ ] –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API
    - [ ] Deployment guide

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### A. –ü–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–∞ API (summary)

| Endpoint | –ú–µ—Ç–æ–¥—ã | Auth | Frontend | Admin | –°—Ç–∞—Ç—É—Å |
|----------|--------|------|----------|-------|--------|
| `/api/health` | GET | ‚ùå | ‚úÖ | ‚úÖ | ‚úÖ –û—Å—Ç–∞–≤–∏—Ç—å |
| `/api/auth/login` | POST | ‚ùå | ‚ùå | ‚úÖ | ‚úÖ –û—Å—Ç–∞–≤–∏—Ç—å |
| `/api/auth/me` | GET | ‚úÖ | ‚ùå | ‚úÖ | ‚úÖ –û—Å—Ç–∞–≤–∏—Ç—å |
| `/api/auth/logout` | POST | ‚ùå | ‚ùå | ‚úÖ | ‚ö†Ô∏è –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å |
| `/api/services` | GET/POST/PUT/DELETE | GET: ‚ùå, rest: ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ –û—Å—Ç–∞–≤–∏—Ç—å |
| `/api/portfolio` | GET/POST/PUT/DELETE | GET: ‚ùå, rest: ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ –û—Å—Ç–∞–≤–∏—Ç—å |
| `/api/testimonials` | GET/POST/PUT/DELETE | GET: ‚ùå, rest: ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ –û—Å—Ç–∞–≤–∏—Ç—å |
| `/api/faq` | GET/POST/PUT/DELETE | GET: ‚ùå, rest: ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ –û—Å—Ç–∞–≤–∏—Ç—å |
| `/api/content` | GET/PUT | GET: ‚ùå, PUT: ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ –û—Å—Ç–∞–≤–∏—Ç—å |
| `/api/settings` | GET/PUT | ‚úÖ | ‚ùå | ‚úÖ | ‚úÖ –û—Å—Ç–∞–≤–∏—Ç—å |
| `/api/settings/public` | GET | ‚ùå | ‚úÖ | ‚ùå | ‚ö†Ô∏è –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å |
| `/api/orders` | GET/POST/PUT/DELETE | POST: ‚ùå, rest: ‚úÖ | ‚úÖ | ‚úÖ | ‚ö†Ô∏è –î–æ—Ä–∞–±–æ—Ç–∞—Ç—å |
| `/api/telegram/status` | GET | ‚úÖ | ‚ùå | ‚úÖ | ‚úÖ –û—Å—Ç–∞–≤–∏—Ç—å |
| `/api/telegram/test` | POST | ‚úÖ | ‚ùå | ‚úÖ | ‚úÖ –û—Å—Ç–∞–≤–∏—Ç—å |
| `/api/telegram/send` | POST | ‚úÖ | ‚ùå | ‚úÖ | ‚úÖ –û—Å—Ç–∞–≤–∏—Ç—å |
| `/api/stats` | GET | ‚ùå | ‚úÖ | ‚ùå | ‚ùå **–°–û–ó–î–ê–¢–¨!** |

**–õ–µ–≥–µ–Ω–¥–∞:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

### B. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∑–∞–¥–∞—á

| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ó–∞–¥–∞—á | –í—Ä–µ–º—è | –§–∞–∑–∞ |
|-----------|-------|-------|------|
| üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô | 6 | 2 –¥–Ω—è | –§–∞–∑–∞ 1-2 |
| üü° –í–´–°–û–ö–ò–ô | 5 | 3 –¥–Ω—è | –§–∞–∑–∞ 2-3 |
| üü¢ –°–†–ï–î–ù–ò–ô | 8 | 5 –¥–Ω–µ–π | –§–∞–∑–∞ 3-4 |
| ‚ö™ –ù–ò–ó–ö–ò–ô | 4 | 3 –¥–Ω—è | –§–∞–∑–∞ 4-5 |
| **–ò–¢–û–ì–û** | **23** | **~13 –¥–Ω–µ–π** | |

---

### C. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ–∏—á

#### –ù–æ–≤—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–Ω—ã–π —Å–µ—Ä–≤–∏—Å

**–¢—Ä–µ–±—É–µ—Ç—Å—è:**
1. ‚úÖ `/api/settings/public` - –ü–ï–†–ï–ü–ò–°–ê–¢–¨ (–§–∞–∑–∞ 2)
2. ‚ùå `/api/calculator/estimate` - –°–û–ó–î–ê–¢–¨ (–Ω–æ–≤–∞—è —Ñ–∏—á–∞)
3. ‚ùå `/api/materials` - –°–û–ó–î–ê–¢–¨ (–Ω–æ–≤–∞—è —Ñ–∏—á–∞)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
POST /api/calculator/estimate
{
  "material": "pla",
  "weight": 50,
  "quality": "normal",
  "quantity": 1,
  "additionalServices": ["postProcessing"]
}

Response:
{
  "material_cost": 2500,
  "service_cost": 300,
  "total": 2800,
  "breakdown": { /* ... */ }
}
```

---

#### API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞–º–∏

**–¢—Ä–µ–±—É–µ—Ç—Å—è:**
1. ‚úÖ `/api/orders` - –î–û–†–ê–ë–û–¢–ê–¢–¨ (–§–∞–∑–∞ 3)
2. ‚ùå `/api/orders/:id` - –°–û–ó–î–ê–¢–¨ (–Ω–æ–≤–∞—è —Ñ–∏—á–∞)
3. ‚ùå `/api/orders/:id/status` - –°–û–ó–î–ê–¢–¨ (–Ω–æ–≤–∞—è —Ñ–∏—á–∞)
4. ‚ùå `/api/orders/:id/history` - –°–û–ó–î–ê–¢–¨ (–Ω–æ–≤–∞—è —Ñ–∏—á–∞)

---

### D. –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–µ—Å—Ç—ã

#### Unit Tests (–¥–ª—è helpers)

```
tests/unit/
‚îú‚îÄ‚îÄ DatabaseTest.php
‚îú‚îÄ‚îÄ ResponseTest.php
‚îú‚îÄ‚îÄ JWTTest.php
‚îú‚îÄ‚îÄ AuthTest.php
‚îú‚îÄ‚îÄ ValidatorTest.php (–Ω–æ–≤—ã–π)
‚îî‚îÄ‚îÄ LoggerTest.php (–Ω–æ–≤—ã–π)
```

#### Integration Tests (–¥–ª—è endpoints)

```
tests/integration/
‚îú‚îÄ‚îÄ HealthTest.php
‚îú‚îÄ‚îÄ AuthTest.php
‚îú‚îÄ‚îÄ ServicesTest.php
‚îú‚îÄ‚îÄ PortfolioTest.php
‚îú‚îÄ‚îÄ TestimonialsTest.php
‚îú‚îÄ‚îÄ FAQTest.php
‚îú‚îÄ‚îÄ ContentTest.php
‚îú‚îÄ‚îÄ SettingsTest.php
‚îú‚îÄ‚îÄ OrdersTest.php
‚îî‚îÄ‚îÄ TelegramTest.php
```

#### Security Tests

```
tests/security/
‚îú‚îÄ‚îÄ SQLInjectionTest.php
‚îú‚îÄ‚îÄ XSSTest.php
‚îú‚îÄ‚îÄ CSRFTest.php
‚îú‚îÄ‚îÄ RateLimitingTest.php
‚îî‚îÄ‚îÄ JWTSecurityTest.php
```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** 7/10  
**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** 4/10 ‚ö†Ô∏è  
**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 6/10  
**–ö–æ–¥ –∫–∞—á–µ—Å—Ç–≤–æ:** 7/10  
**–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å:** 3/10  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** 5/10

**–ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞:** 5.3/10

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤—ã–≤–æ–¥—ã

‚úÖ **–ü–ª—é—Å—ã:**
- –ü—Ä–æ—Å—Ç–∞—è –∏ –ø–æ–Ω—è—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- Zero dependencies - –ª–µ–≥–∫–æ –¥–µ–ø–ª–æ–∏—Ç—å
- –•–æ—Ä–æ—à–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ prepared statements
- –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –∫–æ–¥ –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

‚ùå **–ú–∏–Ω—É—Å—ã:**
- **–ö–†–ò–¢–ò–ß–ù–û:** Telegram token –≤ –ø—É–±–ª–∏—á–Ω–æ–º —Ñ–∞–π–ª–µ
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ rate limiting
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å JWT

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º

**–°–¥–µ–ª–∞—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å (1-2 –¥–Ω—è):**
1. –£–¥–∞–ª–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –∏–∑ frontend
2. –î–æ–±–∞–≤–∏—Ç—å rate limiting
3. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
4. –ü–æ—á–∏–Ω–∏—Ç—å /api/stats –∏ /api/settings/public

**–°–¥–µ–ª–∞—Ç—å –≤–æ –≤—Ç–æ—Ä—É—é –æ—á–µ—Ä–µ–¥—å (3-5 –¥–Ω–µ–π):**
5. –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é
6. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è Telegram –æ—Ç–ø—Ä–∞–≤–∫–∞
7. –î–æ–±–∞–≤–∏—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é
8. –î–æ–±–∞–≤–∏—Ç—å CAPTCHA

**–°–¥–µ–ª–∞—Ç—å –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º (–ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏):**
9. Service layer
10. API –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
11. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
12. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
13. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

**–î–∞—Ç–∞ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è:** 2024-11-17  
**–ê–≤—Ç–æ—Ä:** Backend Architecture Audit  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é
